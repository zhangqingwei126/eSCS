package com.pinnet.web.controller.pay.alipay;

import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;

import com.alipay.api.AlipayApiException;
import com.alipay.api.AlipayClient;
import com.alipay.api.DefaultAlipayClient;
import com.alipay.api.request.AlipayTradeQueryRequest;
import com.alipay.api.response.AlipayTradeQueryResponse;

public class Test {
	
	AlipayTradeQueryResponse1 [getAlipayStoreId()=null, getAuthTradePayMode()=null, getBuyerLogonId()=182****3319, getBuyerPayAmount()=0.00, getBuyerUserId()=2088802821196340, getBuyerUserType()=null, getDiscountAmount()=null, getDiscountGoodsDetail()=null, getFundBillList()=null, getIndustrySepcDetail()=null, getInvoiceAmount()=0.00, getMdiscountAmount()=null, getOpenId()=null, getOutTradeNo()=20181011194126670, getPayAmount()=null, getPayCurrency()=null, getPointAmount()=0.00, getReceiptAmount()=0.00, getSendPayDate()=Thu Oct 11 19:42:21 CST 2018, getSettleAmount()=null, getSettleCurrency()=null, getSettleTransRate()=null, getStoreId()=null, getStoreName()=null, getTerminalId()=null, getTotalAmount()=0.01, getTradeNo()=2018101122001496340514488068, getTradeStatus()=TRADE_SUCCESS, getTransCurrency()=null, getTransPayRate()=null, getVoucherDetailList()=null, getErrorCode()=10000, getCode()=10000, getMsg()=Success, getSubCode()=null, getSubMsg()=null, getBody()={"alipay_trade_query_response":{"code":"10000","msg":"Success","buyer_logon_id":"182****3319","buyer_pay_amount":"0.00","buyer_user_id":"2088802821196340","invoice_amount":"0.00","out_trade_no":"20181011194126670","point_amount":"0.00","receipt_amount":"0.00","send_pay_date":"2018-10-11 19:42:21","total_amount":"0.01","trade_no":"2018101122001496340514488068","trade_status":"TRADE_SUCCESS"},"sign":"VWDRYlOrrRkhHXwf7E7QYKrocMnP+ogB89rTDkCCV6ZrELicJ/SYvTDQtPJbz1Zx/566NjC1/xnvkRB0n2jsxe9Hb2c6Q3Hb3LtJduxNjQ4u8BO8PQEcmksMgnlh1hbfqucnuerQaNo/ZcpHq9S1ri98b+mYEnJWqbKHbm/692Xfjdr37Hstcw5Qqi1/rI50SJCabwZkuo1/Li++3l7DrTrkaUr227gxel6r4nj7s99NTIpQa1wtoQhT0cIarqKve0hur+YoqcJZKVDNPe6DaHzhl+miANtHekgtQusrZgw2aBL7nFa1DtqbiPQmlSJ0GtcLFlEj2Xqt3agjAwYEQw=="}, getParams()={biz_content={"out_trade_no":"20181011194126670"}}, isSuccess()=true, getClass()=class com.alipay.api.response.AlipayTradeQueryResponse, hashCode()=10687174, toString()=com.pinnet.web.sm.controller.AlipayTradeQueryResponse1@a312c6]


	public static void main(String[] args) throws AlipayApiException {
		
		Map<String, Object> paramMap = new HashMap<String, Object>();
		paramMap.put("out_trade_no", "20181011194126670");
//		paramMap.put("trade_no", trade_no);
		
		// 实例化客户端
		AlipayClient alipayClient = new DefaultAlipayClient(ALIPAY_URL, ALIPAY_APP_ID,
				ALIPAY_APP_PRIVATE_KEY, ALIPAY_JSON, ALIPAY_CHARSET,
				ALIPAY_PUBLIC_KEY, ALIPAY_SIGN_RSA2);
		
		
		//查询订单交易状态
		AlipayTradeQueryRequest request = new AlipayTradeQueryRequest();
		request.setBizContent(convertToJsonStr(paramMap));
		
		AlipayTradeQueryResponse response = alipayClient.execute(request);
		if(response.isSuccess()){ // 进行业务处理
			System.out.println("alipayTradeQuery 查询成功");
			response.getBody();
			response.getSendPayDate();
		} else {
			System.out.println("alipayTradeQuery 查询失败");
		}
		
	}
	
	public static String convertToJsonStr(Map<String, Object> paramMap) {
		StringBuffer sBuffer = new StringBuffer();
		sBuffer.append("{");
		for(Entry<String, Object> entry : paramMap.entrySet()) {
			sBuffer.append("\"" + entry.getKey() + "\":" +"\"" + entry.getValue().toString() + "\",");
		}
		sBuffer = new StringBuffer(sBuffer.substring(0, sBuffer.length()-1));
		sBuffer.append("}");
		return sBuffer.toString();
	}
	
	//在支付寶用戶(商戶)的Id,在支付宝网站上查询.合作身份者ID，以2088开头由16位纯数字组成的字符串(正式上线修改填入)
		//public static String ALIPAY_APP_ID = "2016091200494123";
		
		public static String ALIPAY_APP_ID = "2018082761180270";
		
		//应用的私有密匙RSA2(正式上线修改填入)
		public static String ALIPAY_APP_PRIVATE_KEY = "MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQD1QxEZH5Bp09NZofxIG05pbAJMy0L3/6OkqypB0GJxnhWdeGniOOwtU4T5fi5N5d5KWeJ0mNBP7q1RnRrm2zocCDaoeXlU4w9uc+uv5kxpeP1gCEM07mvSWck/5xvYIF/6RPyxZ6FN2Wwm/boJdA6g4UVJG01ETO/ADwL7bUVdNvidte9VyzDPq9x8sxQ8TBSIrwXyU2K2xX9eQ6hEh9gcjeP2CG3Q1r5WPIFu0xq8Mtmkpi8ITgKqNG7f5BxGFtwQZpjtoDKUwP8z9PFAgUluAJMbveWfr4D3Gn/UeGYUBdw2rcNpRTqT/ExriH3j/Jr8Pe9El1T6jDOaVFCbC2ZBAgMBAAECggEBAInnxgtsVhVLSAGUNXiN8g8Q7lIj0GoF0gvbOo17EH92Ng0vEcpj21i5J4Hp0zt1zwHbfJu2+RqYx9emEORRzGDKtYERnImAisK+Z32mbry3jTCcNL3kebfzSFeoKV3jBlSAyd0uueI+KLPb4ulB2p/XStAKi+2lnQFO74xUKrZ4AoWs31sdwR8+XBbqZNUBkTbivDQXkdF5dH5VO8NLyZYKea2GkMkuBV6FDYIsoVUCD4DT4Ik/sHcpJERAI5B87LTC7QhgsXA9kYAPhzaJN8Iz2y9tybJiL39lluR19aR70uajHtmgs6d/pyxpoUfdj8/AwlwYShIZsq+j3AJ4VgECgYEA/9ohYte5EkS8U4cr9ERO+eFXtxkPZz0+SLXryFSlucQFgne+MgNlOqVhgRAxyopkeyehAjZcboxQyr9CA/ZUT0qGipapwvvu5ZIqD6W2hDq0T1CTvWgIycgSDf75J78W5uuzpLtBQESZFjoj1zKSCirpdBipE/YL90e8ZD6WepECgYEA9WdecBCpEFmPNhz74RoN7azUYC7QQik2B7XvA8tRJAQOR+Z3fBezvny4vP0CPg0hN2lre3QIDCR93s6HnS1XORq+S2xcjy+QvmfOFPweIh1cmD9QKelJ+QuDDwSwig1I8Om7S0LMINLGjODQuNswr1H1TimXihIFhFOo1b06KLECgYEAxZD8POZV/DxlrJ5xm5Lv5VdUM4g/c7pAEUehhbWPr64ljwTGMrqafbndXBtUR5GsW8lTNHEj2R2y+YzM/mBF5GCpGfWTq4R9inrezexpzxvBxolzPExMlPxQrMwaO838cl7J/se2cFlIWXiV2oQrb3yJf2PXlBloTg/v8vy9mHECgYEAoj308aISI/0R8XS4Edpn2vqobe6FQTh9wBtIKfoBaw5DYsW7uQ7yhr1uZYPgN6X2j+viY3wS1fRKQ0PH5OJVCCvmI3dAuml4CGoYlUcZpPREg2NYXF0fyscRnpw7GwotbxkX+mnvCsRPAFShqZVAWqiUxVg6F85SV2n39VdlXAECgYANwcCIXID+EE6rfnyh6TpAWxVamDxNtYztVGFvPMCH4tvk9w16bt8yk5O3QX4On1BpoMjjB3BKEyUuWVpAXAxgb2cfWCCJmr+T327ugGMJgeKeAaJO6f3eODhLXq3Bqp4D6xKgjDMBYDsoJ4GYE3R7JlDZBWqNrHyNBCjq/v57Yg==";

		//支付宝公钥(正式上线修改填入)
		public static String ALIPAY_PUBLIC_KEY = "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAljJRKd2dkwy0JdDXgVcd5flGP0zi+drV88nmh3xfo1W0iil/2H7GY5SeN/32xeSY5p2J1pputXzaXRevr1xmKo23AAUl/bqtOMAO29mvoch6P3Rxk/DUEvQqbFnttNsaRtWBuVDYf/+B6n10NaXdMHyp2XtKhw20ffsq2aEC3GtwtNJHo5SJ4sB4aVaD27FXUPK54uWWOcdayGEWzZKkImF7j+felJoRBTFrPazskE5jHZsQ2QaaFw0xSi2aNxC11QDHkgllRAgafbS5qG6TSHSHD+yRva+2tyI3J6qgKYrNJqOx6G2TcemVLdHw+eI2MLmQGPa9f06uin9tN6WyCQIDAQAB"; 
			
		//支付宝结算接口方式地址
		public static String ALIPAY_URL = "https://openapi.alipay.com/gateway.do";

		//↑↑↑↑↑↑↑↑↑↑请在这里配置您的基本信息↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑
		
		
		
//		沙箱网关测试功能使用
//		public static String ALIPAY_APP_ID = "2016091600524794";
	//	
//		public static String ALIPAY_URL = "https://openapi.alipaydev.com/gateway.do";
	//	
//		//应用的私有密匙RSA2(正式上线修改填入)
//		public static String ALIPAY_APP_PRIVATE_KEY = "MIIEvwIBADANBgkqhkiG9w0BAQEFAASCBKkwggSlAgEAAoIBAQD1QxEZH5Bp09NZofxIG05pbAJMy0L3/6OkqypB0GJxnhWdeGniOOwtU4T5fi5N5d5KWeJ0mNBP7q1RnRrm2zocCDaoeXlU4w9uc+uv5kxpeP1gCEM07mvSWck/5xvYIF/6RPyxZ6FN2Wwm/boJdA6g4UVJG01ETO/ADwL7bUVdNvidte9VyzDPq9x8sxQ8TBSIrwXyU2K2xX9eQ6hEh9gcjeP2CG3Q1r5WPIFu0xq8Mtmkpi8ITgKqNG7f5BxGFtwQZpjtoDKUwP8z9PFAgUluAJMbveWfr4D3Gn/UeGYUBdw2rcNpRTqT/ExriH3j/Jr8Pe9El1T6jDOaVFCbC2ZBAgMBAAECggEBAInnxgtsVhVLSAGUNXiN8g8Q7lIj0GoF0gvbOo17EH92Ng0vEcpj21i5J4Hp0zt1zwHbfJu2+RqYx9emEORRzGDKtYERnImAisK+Z32mbry3jTCcNL3kebfzSFeoKV3jBlSAyd0uueI+KLPb4ulB2p/XStAKi+2lnQFO74xUKrZ4AoWs31sdwR8+XBbqZNUBkTbivDQXkdF5dH5VO8NLyZYKea2GkMkuBV6FDYIsoVUCD4DT4Ik/sHcpJERAI5B87LTC7QhgsXA9kYAPhzaJN8Iz2y9tybJiL39lluR19aR70uajHtmgs6d/pyxpoUfdj8/AwlwYShIZsq+j3AJ4VgECgYEA/9ohYte5EkS8U4cr9ERO+eFXtxkPZz0+SLXryFSlucQFgne+MgNlOqVhgRAxyopkeyehAjZcboxQyr9CA/ZUT0qGipapwvvu5ZIqD6W2hDq0T1CTvWgIycgSDf75J78W5uuzpLtBQESZFjoj1zKSCirpdBipE/YL90e8ZD6WepECgYEA9WdecBCpEFmPNhz74RoN7azUYC7QQik2B7XvA8tRJAQOR+Z3fBezvny4vP0CPg0hN2lre3QIDCR93s6HnS1XORq+S2xcjy+QvmfOFPweIh1cmD9QKelJ+QuDDwSwig1I8Om7S0LMINLGjODQuNswr1H1TimXihIFhFOo1b06KLECgYEAxZD8POZV/DxlrJ5xm5Lv5VdUM4g/c7pAEUehhbWPr64ljwTGMrqafbndXBtUR5GsW8lTNHEj2R2y+YzM/mBF5GCpGfWTq4R9inrezexpzxvBxolzPExMlPxQrMwaO838cl7J/se2cFlIWXiV2oQrb3yJf2PXlBloTg/v8vy9mHECgYEAoj308aISI/0R8XS4Edpn2vqobe6FQTh9wBtIKfoBaw5DYsW7uQ7yhr1uZYPgN6X2j+viY3wS1fRKQ0PH5OJVCCvmI3dAuml4CGoYlUcZpPREg2NYXF0fyscRnpw7GwotbxkX+mnvCsRPAFShqZVAWqiUxVg6F85SV2n39VdlXAECgYANwcCIXID+EE6rfnyh6TpAWxVamDxNtYztVGFvPMCH4tvk9w16bt8yk5O3QX4On1BpoMjjB3BKEyUuWVpAXAxgb2cfWCCJmr+T327ugGMJgeKeAaJO6f3eODhLXq3Bqp4D6xKgjDMBYDsoJ4GYE3R7JlDZBWqNrHyNBCjq/v57Yg==";
	//
//		//支付宝公钥(正式上线修改填入)
//		public static String ALIPAY_PUBLIC_KEY = "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvEbBqg/zbWapc9hB+PWpV3R3QjNvaZLW2T4fdYpZw2/W52jfrJk+PZl5t1SjuIYsZwe5fRgoKv+HOq/HXDxwDczoFfi/P1/SLhl/DgcBSe+wheeR18rnLMz9+fL1BLaYvuwex0qlbVrPjTNDCfU0ecwaKWMVtYVtgGv+08BtnWwNexm4J4YgrdP28/GSV/5cmUdRpUdbcjd9IPzZU8QtZElsyANrTTTQeDWw9+xf72+/T0UQgeqmBw42Zl4JYIRZ4lM3l6EyYYZJNmZaqqR57CXEmyCmpLHigud+9qzA1dk2buK38TuuG9J6PmHPQaCf1gxY7g9KZJot3KkWDOn9CQIDAQAB"; 
//		沙箱网关测试功能使用
		
//		------------------------------------------ //	
		//数据交付方式
		public static String ALIPAY_JSON = "JSON";
		
		// 字符编码格式 目前支持 gbk或utf-8
		public static String ALIPAY_CHARSET = "UTF-8";
		
		//MD5加密、解密方式
		public static String ALIPAY_SIGN_MD5 = "MD5";
		
		//RSA2加密、解密方式
		public static String ALIPAY_SIGN_RSA2 = "RSA2";
}
